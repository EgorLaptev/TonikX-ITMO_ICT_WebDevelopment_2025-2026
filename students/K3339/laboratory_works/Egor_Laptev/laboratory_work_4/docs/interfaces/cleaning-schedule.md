# Интерфейс управления графиком уборки

Интерфейс для управления графиком уборки помещений отеля.

## Описание

Компонент `CleaningSchedule.vue` предоставляет полный CRUD функционал для управления графиком уборки, включая создание, редактирование и удаление записей о назначении сотрудников на уборку этажей в определенные дни недели.

## Расположение

Компонент находится в файле `src/views/CleaningSchedule.vue`

## Маршрут

- **URL:** `/cleaning`
- **Маршрут:** `CleaningSchedule`
- **Мета:** `requiresAuth: true` - доступен только авторизованным пользователям

## Функциональность

### Основные операции

1. **Просмотр списка** - отображение всего графика уборки в таблице
2. **Создание** - добавление новой записи в график
3. **Редактирование** - изменение существующей записи
4. **Удаление** - удаление записи из графика с подтверждением

### Поля формы

1. **День недели (weekday)**
   - Тип: выбор из списка
   - Обязательное поле
   - Правила валидации: должен быть выбран день недели
   - Доступные значения: monday, tuesday, wednesday, thursday, friday, saturday, sunday

2. **Сотрудник (employee_id)**
   - Тип: выбор из списка
   - Обязательное поле
   - Правила валидации: должен быть выбран сотрудник
   - В списке отображаются только работающие сотрудники (employed = true)

3. **Этаж (floor_id)**
   - Тип: выбор из списка
   - Обязательное поле
   - Правила валидации: должен быть выбран этаж

### Валидация

Форма использует встроенную валидацию Vuetify с правилами:

- `weekday`: проверка выбора дня недели
- `employee_id`: проверка выбора сотрудника
- `floor_id`: проверка выбора этажа

На сервере также выполняется проверка:
- Для каждого этажа может быть назначена только одна уборка в день недели
- Нельзя назначить уволенного сотрудника

### API Endpoints

**GET** `/api/cleaning/` - Получение списка записей графика уборки

**GET** `/api/cleaning/{id}/` - Получение конкретной записи

**POST** `/api/cleaning/` - Создание новой записи

**PUT** `/api/cleaning/{id}/` - Обновление записи

**PATCH** `/api/cleaning/{id}/` - Частичное обновление записи

**DELETE** `/api/cleaning/{id}/` - Удаление записи

### Пример запроса создания

```json
{
  "weekday": "monday",
  "employee_id": 1,
  "floor_id": 1
}
```

### Пример ответа

```json
{
  "id": 1,
  "weekday": "monday",
  "employee": {
    "id": 1,
    "last_name": "Петров",
    "first_name": "Петр",
    "middle_name": "Петрович",
    "employed": true
  },
  "floor": {
    "id": 1,
    "number": 1
  }
}
```

## UI Компоненты

Интерфейс использует следующие компоненты Vuetify:

- `v-container` - контейнер с адаптивной сеткой
- `v-card` - карточка с данными
- `v-data-table` - таблица для отображения данных
- `v-dialog` - модальное окно для формы
- `v-form` - форма с валидацией
- `v-select` - выпадающие списки для выбора дня недели, сотрудника и этажа
- `v-btn` - кнопки действий
- `v-alert` - отображение ошибок

## Особенности

- Дни недели отображаются на русском языке в таблице (Понедельник, Вторник и т.д.)
- В выпадающем списке сотрудников отображаются только работающие сотрудники
- Отображение полного имени сотрудника в формате "Фамилия Имя Отчество"

## Обработка ошибок

Компонент обрабатывает следующие типы ошибок:

- **400 Bad Request**: Ошибки валидации данных (например, для этажа уже назначена уборка в этот день, попытка назначить уволенного сотрудника)
- **401 Unauthorized**: Отсутствие авторизации
- **404 Not Found**: Запись не найдена
- **500 Internal Server Error**: Ошибка сервера

Все ошибки отображаются в виде алерта под формой.

