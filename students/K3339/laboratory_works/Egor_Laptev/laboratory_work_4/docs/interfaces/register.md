# Интерфейс регистрации

Интерфейс регистрации позволяет новым пользователям создать учетную запись в системе.

## Описание

Компонент `Register.vue` реализует форму регистрации с валидацией всех полей, проверкой совпадения паролей и обработкой ошибок. После успешной регистрации пользователь перенаправляется на страницу входа.

## Расположение

Компонент находится в файле `src/views/Register.vue`

## Маршрут

- **URL:** `/register`
- **Маршрут:** `Register`
- **Мета:** `requiresGuest: true` - доступен только неавторизованным пользователям

## Функциональность

### Поля формы

1. **Имя пользователя (username)**
   - Тип: текст
   - Обязательное поле
   - Минимальная длина: 3 символа
   - Правила валидации:
     - Поле должно быть заполнено
     - Длина должна быть не менее 3 символов

2. **Email**
   - Тип: email
   - Обязательное поле
   - Правила валидации:
     - Поле должно быть заполнено
     - Должен соответствовать формату email (regex: `/.+@.+\..+/`)

3. **Пароль (password)**
   - Тип: password
   - Обязательное поле
   - Минимальная длина: 8 символов
   - Правила валидации:
     - Поле должно быть заполнено
     - Длина должна быть не менее 8 символов

4. **Подтверждение пароля (confirmPassword)**
   - Тип: password
   - Обязательное поле
   - Правила валидации:
     - Поле должно быть заполнено
     - Должно совпадать с полем "Пароль"

### Валидация

Форма использует встроенную валидацию Vuetify с правилами:

- `usernameRules`: проверка наличия и минимальной длины
- `emailRules`: проверка наличия и формата email
- `passwordRules`: проверка наличия и минимальной длины
- `confirmPasswordRules`: проверка наличия и совпадения с паролем

### Обработка запроса

При нажатии на кнопку "Зарегистрироваться":

1. Проверяется валидность формы
2. Проверяется совпадение пароля и подтверждения пароля
3. Отправляется POST запрос на `/auth/users/` с данными:
   ```json
   {
     "username": "имя_пользователя",
     "password": "пароль",
     "email": "email@example.com"
   }
   ```
4. При успешном ответе:
   - Отображается сообщение об успехе
   - Через 2 секунды происходит автоматическое перенаправление на страницу входа (`/login`)
5. При ошибке:
   - Отображается сообщение об ошибке под формой
   - Форма остается на странице регистрации

### Обработка ошибок

Компонент обрабатывает следующие типы ошибок:

- **400 Bad Request**: Ошибки валидации данных
  - Если ошибка в `username`: отображается `response.data.username[0]`
  - Если ошибка в `email`: отображается `response.data.email[0]`
  - Если ошибка в `password`: отображается `response.data.password[0]`
  - Иначе: общее сообщение об ошибке
- **Другие ошибки**: Общее сообщение об ошибке регистрации

### Пример использования

```vue
<template>
  <Register />
</template>

<script setup>
import Register from '@/views/Register.vue'
</script>
```

### API Endpoint

**POST** `/auth/users/`

**Тело запроса:**
```json
{
  "username": "string",
  "password": "string",
  "email": "string"
}
```

**Успешный ответ (201 Created):**
```json
{
  "email": "user@example.com",
  "username": "newuser",
  "id": 1
}
```

**Ошибка (400 Bad Request):**
```json
{
  "username": ["Пользователь с таким именем уже существует."],
  "email": ["Пользователь с таким email уже существует."],
  "password": ["Этот пароль слишком короткий."]
}
```

## UI Компоненты

Интерфейс использует следующие компоненты Vuetify:

- `v-container` - контейнер с адаптивной сеткой
- `v-card` - карточка с формой
- `v-toolbar` - панель инструментов с заголовком
- `v-form` - форма с валидацией
- `v-text-field` - текстовые поля ввода
- `v-btn` - кнопки действий
- `v-alert` - отображение ошибок и уведомлений об успехе

## Навигация

После успешной регистрации пользователь автоматически перенаправляется на страницу входа через 2 секунды. Также на странице есть ссылка для перехода к странице входа.

## Особенности

- Реализована проверка совпадения паролей на клиентской стороне
- Показывается сообщение об успехе перед перенаправлением
- Валидация всех полей происходит в реальном времени
- Подробные сообщения об ошибках для каждого поля



